function sizeButtonsActions(){const i=document.querySelectorAll(".bundle-size-dot");i.forEach((t,n)=>{t.addEventListener("click",function(e){t.classList.contains("active")||(t.classList.add("active"),i.forEach((e,t)=>{n!==t&&e.classList.remove("active")}),changeBundleSize(t))})})}function changeBundleSize(e){document.querySelector(".size-section-subtitle").innerHTML=`Shop ${e.dataset.size} for $`+e.dataset.discount;document.querySelector(".atc-section-subtitle").innerHTML=e.dataset.size+" for $"+e.dataset.discount;var t=document.querySelector(".bags-section"),n=Math.abs(t.childElementCount-e.dataset.size);if(e.dataset.size>t.childElementCount)for(let e=0;e<n;e++){var i=document.querySelector(".bag-item-default").cloneNode(!0);i.removeAttribute("style"),i.setAttribute("class","bag-item"),t.appendChild(i)}else for(let e=0;e<n;e++)t.removeChild(t.lastElementChild);onBundleChange()}function addToBundleButtons(){document.querySelectorAll(".btn--add-to-bundle").forEach(e=>{e.addEventListener("click",function(){fillBundleItems(e.dataset.variant_id,e.dataset.variant_img,e.dataset.variant_price)})})}function fillBundleItems(e,t,n){var i=document.querySelectorAll(".bag-item:not(.bag-item-filled)");0<i.length&&(i[0].firstElementChild.setAttribute("src",t),i[0].classList.add("bag-item-filled"),i[0].setAttribute("data-variation_id",e),i[0].setAttribute("data-variation_price",n),(t=document.createElement("span")).classList.add("removeBundle"),t.setAttribute("onclick","removeBundleItem(this)"),t.innerHTML=`<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41L12.59 0Z" fill="#313131"></path>
                                </svg>`,i[0].appendChild(t),onBundleChange())}function removeBundleItem(e){var e=e.parentNode,t=document.querySelector(".bag-item-default").firstElementChild.getAttribute("src");e.firstElementChild.setAttribute("src",t),e.classList.remove("bag-item-filled"),e.removeAttribute("data-variation_id"),e.removeChild(e.lastElementChild),onBundleChange()}function calculatePrice(){var e=document.querySelectorAll(".bag-item-filled");let t=0;var n=document.querySelector(".bags-section"),i=document.querySelector(".discounted-price"),a=document.querySelector(".total-price"),d=document.querySelector(".bundle-size-dot.active").dataset.discount;e.forEach(e=>{t+=parseInt(e.dataset.variation_price)}),e.length==n.childElementCount?(i.innerHTML=usdFormat(100*d),a.innerHTML=usdFormat(t)):(i.innerHTML=usdFormat(t),a.innerHTML="")}function checkATCButtonsText(){const e=document.querySelectorAll(".btn--add-to-bundle");var t=document.querySelectorAll(".bag-item-filled");e.forEach(e=>{e.querySelector(".quick-atc-text").innerHTML="ADD TO BUNDLE"}),t.forEach(t=>{e.forEach(e=>{t.dataset.variation_id==e.dataset.variant_id&&(e.querySelector(".quick-atc-text").innerHTML="ADD ANOTHER")})})}function onBundleChange(){calculatePrice(),checkAddToCartButton(),checkATCButtonsText()}function usdFormat(e){return(e/100).toLocaleString("en-US",{style:"currency",currency:"USD"})}function checkAddToCartButton(){var e=document.querySelectorAll(".bag-item-filled"),t=document.querySelector(".bags-section"),n=document.querySelector(".bundle-btn");e.length==t.childElementCount?n.classList.remove("bundle-btn-disabled"):n.classList.add("bundle-btn-disabled")}window.addEventListener("load",function(){sizeButtonsActions(),addToBundleButtons(),document.querySelector(".bundle-btn").addEventListener("click",function(e){const i=3==document.querySelector(".bundle-size-dot.active").dataset.size?"_base_discount3":"_base_discount";var t=document.querySelectorAll(".bag-item-filled");let a=[];t.forEach((n,e)=>{if(0===e){e={id:n.dataset.variation_id,quantity:1,properties:{[i]:"true"}};a.push(e)}else{let t=!1;a.forEach(e=>{n.dataset.variation_id==e.id&&(e.quantity=e.quantity+1,t=!0)}),t||(e={id:n.dataset.variation_id,quantity:1,properties:{[i]:"true"}},a.push(e))}}),fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:a})}).then(e=>{e.ok&&$("body").trigger("added.ajaxProduct")})})});